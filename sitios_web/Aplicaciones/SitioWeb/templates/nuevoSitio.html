{% extends 'plantilla.html' %}

{% block contenido %}

<div style="margin:auto; width:50%; padding:20px; border:1px solid #ccc;">
    <h2 style="text-align:center;">Registrar Nuevo Sitio Web</h2>
    <br>

    <form enctype="multipart/form-data"
          action="{% url 'guardar_sitio' %}"
          method="post"
          id="frm_nuevo_sitio">

        {% csrf_token %}

        <label><b>Nombre del sitio:</b></label>
        <input type="text" name="nombre" id="nombre"
               placeholder="Ingrese el nombre del sitio"
               style="width:100%; padding:6px;">
        <br><br>

        <label><b>URL:</b></label>
        <input type="url" name="url" id="url"
               placeholder="https://ejemplo.com"
               style="width:100%; padding:6px;">
        <br><br>

        <label><b>Creador:</b></label>
        <input type="text" name="creador" id="creador"
               placeholder="Nombre del creador"
               style="width:100%; padding:6px;">
        <br><br>

        <label><b>Tecnología:</b></label>
        <select name="tecnologia" id="tecnologia"
                style="width:100%; padding:6px;">
            <option value="">-- Seleccione una tecnología --</option>
            {% for t in tecnologias %}
                <option value="{{ t.id }}">{{ t.nombre }}</option>
            {% endfor %}
        </select>
        <br><br>

        <label><b>Foto / Logo:</b></label>
        <input type="file" name="foto" id="foto">
        <br><br>

        <div style="text-align:center;">
            <button type="submit" class="btn btn-primary">
                Guardar
            </button>
            <a href="{% url 'index' %}" class="btn btn-danger">
                Cancelar
            </a>
        </div>
    </form>
</div>

<script>
$(document).ready(function(){

    $("#frm_nuevo_sitio").validate({
        rules:{
            nombre:{ required:true },
            url:{ required:true, url:true },
            creador:{ required:true },
            tecnologia:{ required:true }
        },
        messages:{
            nombre:{ required:"Ingrese el nombre del sitio" },
            url:{ required:"Ingrese la URL", url:"URL no válida" },
            creador:{ required:"Ingrese el creador" },
            tecnologia:{ required:"Seleccione una tecnología" }
        }
    });

});
</script>

{% endblock %}
